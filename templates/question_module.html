<div class="question-wrapper" id="{{ str(question["_id"]) }}">
    <div class="asker-info">
        <div class="asker-profile-pic">
            <a href="/users/{{ str(asker["_id"]) }}">
                <img src="{{ asker["profile_pic_link"] }}">
            </a>
        </div>
        <div class="asker-text">
            <div class="asker-username">
                <a href="/users/{{ str(asker["_id"]) }}"> by {{ asker["username"] }}</a>
            </div>
            <div class="question-date">
                {% set total_seconds = (datetime.utcnow() - question["date"]).total_seconds() %}
                {% if total_seconds < 30 %}
                    Just now
                {% elif total_seconds < 60 %}
                    {{ int(total_seconds) }}s ago
                {% elif total_seconds < 3600 %}
                    {{ int(total_seconds * 0.0166667) }}m ago
                {% elif total_seconds < 86400 %}
                    {{ int(total_seconds * 0.000277778) }}h ago
                {% elif total_seconds < 172800 %}
                    Yesterday
                {% elif total_seconds < 15770000 %}
                    {{ question["date"].strftime("%B %d") }}
                {% else %}
                    {{ question["date"].strftime("%B %d, %Y") }}
                {% end %}
            </div>
        </div>
    </div>
    <div class="question-image" style="background-image: url({{ question["image_link"] }})">
        <div class="question-image-overlay"></div>
        <div class="question-title">
            <a href="{{ "/questions/" + str(question["_id"]) }}">
                {{ question["question"] }}
            </a>
        </div>
    </div>
    <div class="question-content">
        <div class="vote-count">
            {% set vote_count = sum([q["votes"] for q in question["data"]]) %}
            {% if vote_count <= 1000 %}
                {{ vote_count }}
            {% elif vote_count <= 999999 %}
                {{ round(vote_count/1000, 1) }}K
            {% else %}
                {{ round(vote_count/1000000, 1) }}M
            {% end %}
            Votes
        </div>
        <div class="labels {{ str(question["_id"]) }}">
            {% set total_votes = sum([x["votes"] for x in question["data"]]) %}
            {% for idx, q in enumerate(question["data"]) %}
                {% if vote == None %}
                    <div class="poll-answer">
                        <div class="percent-and-bar">
                            <div class="poll-percentage-wrapper">
                                <div class="poll-percentage">{{ int(q["votes"]*100/total_votes) }}%</div>
                            </div>
                            <div class="bar-wrapper1">
                                <div class="bar-wrapper2" style="width: {{ q["votes"]*100/total_votes }}%">
                                    <div class="poll-bar"><div>{{ q["label"] }}</div></div>
                                </div>
                            </div>
                        </div>
                    </div>
                {% else %}
                    {% if idx == vote %}
                        <div class="poll-answer">
                            <div class="percent-and-bar">
                                <div class="poll-percentage-wrapper active">
                                    <div class="poll-percentage">{{ int(q["votes"]*100/total_votes) }}%</div>
                                </div>
                                <div class="bar-wrapper1">
                                    <div class="bar-wrapper2" style="width: {{ q["votes"]*100/total_votes }}%">
                                        <div class="poll-bar"><div>{{ q["label"] }}</div></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% else %}
                        <div class="poll-answer">
                            <div class="percent-and-bar">
                                <div class="poll-percentage-wrapper">
                                    <div class="poll-percentage">{{ int(q["votes"]*100/total_votes) }}%</div>
                                </div>
                                <div class="bar-wrapper1">
                                    <div class="bar-wrapper2" style="width: {{ q["votes"]*100/total_votes }}%">
                                        <div class="poll-bar"><div>{{ q["label"] }}</div></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% end %}
                {% end %}
            {% end %}
        </div>
        <div class="action-buttons">
            <div class="favorite-count">
                <div class="count-text">
                    {% if favorites[1] <= 1000 %}
                        {{ favorites[1] }}
                    {% elif favorites[1] <= 999999 %}
                        {{ round(favorites[1]/1000, 1) }}K
                    {% else %}
                        {{ round(favorites[1]/1000000, 1) }}M
                    {% end %}
                </div>
                <div title="Add to Favorites" class="svg-image {{ str(question["_id"]) }} {% if favorites[0] %}svg-active{% end %}">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Heart" x="0px" y="0px" viewBox="0 0 20 20" xml:space="preserve" enable-background="new 0 0 20 20">
                        <path d="M17.19 4.155c-1.672-1.534-4.383-1.534-6.055 0L10 5.197 8.864 4.155c-1.672-1.534-4.382-1.534-6.054 0-1.881 1.727-1.881 4.52 0 6.246L10 17l7.19-6.599C19.07 8.675 19.07 5.881 17.19 4.155z" fill="#a2a3a2"/>
                    </svg>
                </div>
                <div class="icon-indicator {% if favorites[0] %}active{% end %}"></div>
            </div>
            <div class="share-count">
                <div class="count-text">
                    {% if shares[1] <= 1000 %}
                        {{ shares[1] }}
                    {% elif shares[1] <= 999999 %}
                        {{ round(shares[1]/1000, 1) }}K
                    {% else %}
                        {{ round(shares[1]/1000000, 1) }}M
                    {% end %}
                </div>
                <div title="Share" class="svg-image {{ str(question["_id"]) }}">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Forward" x="0px" y="0px" viewBox="0 0 20 20" xml:space="preserve" enable-background="new 0 0 20 20">
                        <path d="M12 11.874v4.357l7-6.69-7-6.572v3.983c-8.775 0-11 9.732-11 9.732C3.484 12.296 7.237 11.874 12 11.874z" fill="#a2a3a2"/>
                    </svg>
                </div>
                <div class="icon-indicator {% if shares[0] %}active{% end %}"></div>
            </div>
            <div class="comment-count">
                <div class="count-text">
                    {% if comments[1] <= 1000 %}
                        {{ comments[1] }}
                    {% elif comments[1] <= 999999 %}
                        {{ round(comments[1]/1000, 1) }}K
                    {% else %}
                        {{ round(comments[1]/1000000, 1) }}M
                    {% end %}
                </div>
                <a href="/questions/{{ str(question["_id"]) }}#comments">
                    <div title="See Comments" class="svg-image {% if comments[0] %}svg-active{% end %}">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Chat" x="0px" y="0px" viewBox="0 0 20 20" xml:space="preserve" enable-background="new 0 0 20 20">
                            <path d="M5.8 12.2V6H2C0.9 6 0 6.9 0 8v6c0 1.1 0.9 2 2 2h1v3l3-3h5c1.1 0 2-0.9 2-2v-1.82c-0.064 0.014-0.132 0.021-0.2 0.021h-7V12.2zM18 1H9C7.9 1 7 1.9 7 3v8h7l3 3v-3h1c1.1 0 2-0.899 2-2V3C20 1.9 19.1 1 18 1z" fill="#a2a3a2"/>
                        </svg>
                    </div>
                    <div class="icon-indicator {% if comments[0] %}active{% end %}"></div>
                </a>
            </div>
        </div>
    </div>
</div>